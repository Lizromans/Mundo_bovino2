{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Detalle de Compra #{{ compra.cod_com }}</title>
</head>
<body>
    <div class="header">
        <div class="timestamp">{{ compra.fecha_com|date:"d/m/Y, H:i" }}</div>
        <h1 class="title">Detalle de Compra #{{ compra.cod_com }}</h1>
        <hr>
    </div>

    <div class="section">
        <h2>Información General</h2>
        
        <table class="info-table">
            <tr>
                <td class="label">Fecha:</td>
                <td>{{ compra.fecha_com|date:"d/m/Y" }}</td>
            </tr>
            <tr>
                <td class="label">Proveedor:</td>
                <td>{{ compra.proveedor_com.nombre_pro }}<br>{{ compra.proveedor_com.apellido_pro }}</td>
            </tr>
            <tr>
                <td class="label">Cantidad de Animales:</td>
                <td>{{ compra.animales_compra.count }}</td>
            </tr>
            <tr>
                <td class="label">Precio Total:</td>
                <td>${{ compra.precio_com|floatformat:0|intcomma }}</td>
            </tr>
        </table>
    </div>

    <div class="section">
        <h2>Detalles de Animales</h2>
        
        <table class="data-table">
            <thead>
                <tr>
                    <th>Código Animal</th>
                    <th>Edad</th>
                    <th>Peso</th>
                    <th>Precio Unitario</th>
                </tr>
            </thead>
            <tbody>
                {% for animal in compra.animales_compra.all %}
                <tr>
                    <td>{{ animal.cod_ani }}</td>
                    <td>{{ animal.edad_compra_ani }} meses</td>
                    <td>{{ animal.peso_compra_ani|floatformat:2 }} kg</td>
                    <td>${{ animal.precio_compra_ani|floatformat:0|intcomma }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="footer">
        <div class="page-number">{{ page_number }}/{{ page_count }}</div>
    </div>
</body>
</html>
